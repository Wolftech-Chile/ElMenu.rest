
PROYECTO: ELMENU.REST â€“ Sistema de MenÃº Digital para Restaurantes

URL base por restaurante:
https://elmenu.rest/{nombre-del-restaurante}

TECNOLOGÃAS BASE:
- PHP (sin frameworks)
- SQLite (una DB por restaurante)
- HTML5, CSS3 (con variables), JavaScript
- Compatible con cPanel
- Seguridad: bcrypt, CSRF, XSS, SQLi, session hardening

ESTRUCTURA DE ARCHIVOS:
/elmenu.rest/
â”œâ”€â”€ {restaurante}/
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ login.php
â”‚   â”œâ”€â”€ dashboard.php
â”‚   â”œâ”€â”€ logout.php
â”‚   â”œâ”€â”€ config.php
â”‚   â”œâ”€â”€ .htaccess
â”‚   â”œâ”€â”€ restaurante.db
â”‚   â”œâ”€â”€ /img/
â”‚   â”œâ”€â”€ /assets/
â”‚   â”‚   â”œâ”€â”€ style-dashboard.css
â”‚   â”‚   â”œâ”€â”€ style-restaurants.css
â”‚   â”‚   â””â”€â”€ scripts.js

SEGURIDAD:
- bcrypt para contraseÃ±as (cost=12)
- RegeneraciÃ³n de ID de sesiÃ³n al login
- CSRF Token: bin2hex(random_bytes(32))
- XSS: htmlspecialchars + HTMLPurifier
- SQLi: consultas preparadas (PDO)
- Fuerza bruta: bloqueo progresivo tras 3 intentos
- Logs fuera del public root

FUNCIONALIDADES POR ROL:

| AcciÃ³n                        | Admin | Restaurant |
|-----------------------------|--------|------------|
| Crear/Eliminar CategorÃ­as (INFINITAS)  | âœ…      | âœ…         |
| Editar nombre CategorÃ­as (INFINITAS)    | âœ…      | âœ…         |
| Drag & Drop categorÃ­as       | âœ…      | âœ…         |
| CRUD Platos (INFINITOS)      | âœ…      | âœ…         |
| Editar info restaurante     | âœ…      | âœ…         |
| Editar SEO                  | âœ…      | âœ…         |
| PersonalizaciÃ³n visual      | âœ…      | âœ…         |
| Subida de imÃ¡genes          | âœ…      | âœ…         |
| Configuraciones avanzadas  | âœ…      | âŒ         |
| Ver logs seguridad          | âœ…      | âŒ         |
| Exportar CSV                | âœ…      | âŒ         |
| DÃAS DE LICENCIA COMPRADOS  | âœ…      | âŒ         |

PANEL WYSIWYG (DASHBOARD):

[Info RESTAURANTE y SEO]
- Nombre restaurant
- Slogan del restaurant (Subtitulo bajo el nombre del restaurant)
- DirecciÃ³n
- Pais
- Ciudad
- Horario (formato HH:MM - HH:MM)
- TelÃ©fono (+56 9 XXXX XXXX)
- Facebook / Instagram (URL validado)
- Logo (se muestra redimensionado en INDEX en 300x300px) y se usara como Featured image SEO tambiÃ©n
- Fondo header

[SEO]

- DescripciÃ³n SEO (mÃ¡x 160 caracteres)
- Featured image SEO (WebP 1200x630px)
- Meta descripcion
- Featured image (logo)
- og:title, og:image dinÃ¡micos
- Schema.org para restaurant
-


[CATEGORÃAS Y PLATOS]
- MÃ­nimo 6 categorÃ­as, 2 platos por categorÃ­a
- Drag & Drop para orden
- Nombre, descripciÃ³n, precio (CLP sin decimales), imagen (max 3MB)

PERSONALIZACIÃ“N VISUAL:
17 paletas temÃ¡ticas, definidas por variables CSS



JS CLIENTE:
- localStorage + IndexedDB para cache
- Resumen con propina 10% (no sticky)
- BotÃ³n limpiar pedido
- BotÃ³n WhatsApp: https://wa.me/+56XXXXXXXXX?text=...
- SVG botones:
  - /img/whatsapp.svg
  - /img-app/facebook.svg
  - /img-app/instagram.svg

RECOMENDACIONES:
- install.php para validar entorno
- Documentar variables CSS
- Usar GD Library para imÃ¡genes
- AJAX sin recarga
- Sanitizar iframe maps
- Logs fuera de public_html

ENTREGABLE FINAL:
- Sistema funcional en cPanel
- DB precargada: Don Gussini, +56945787874, Av. Siempre Viva 742
- 6 categorÃ­as, 2 platos c/u
- Credenciales:
  - Admin: admin / admin123
  - Restaurant: restaurant / restaurant123
- README.txt explicativo para niÃ±o de 10 aÃ±os

(Secciones de referencia visual, control de licencia y localizaciÃ³n incluidas tal como fueron redactadas por el usuario)


############################################
## â³ CONTROL DE LICENCIA DE USO
############################################

Para mantener control comercial del sistema ELMENU, cada instancia del restaurante tendrÃ¡ una licencia por tiempo limitado, definida en dÃ­as o con una fecha exacta de expiraciÃ³n.

Esta fecha puede estar configurada manualmente en `config.php` o registrada en la base de datos del restaurante por el administrador.

### ğŸ” Acceso por rol:

- **Administrador:** Puede modificar el nÃºmero de dÃ­as de vigencia o la fecha de expiraciÃ³n.
- **Usuario Restaurante:** Solo puede visualizar la vigencia actual, con un mensaje como:
  > "Su licencia es por **XX dÃ­as** y expirarÃ¡ el **dd/mm/yyyy**."

### ğŸ”” Comportamiento esperado en `dashboard.php`:

1. Si faltan 30 dÃ­as o menos para que expire:
   - Mostrar un aviso visible pero no bloqueante.
   - Incluir enlace a WhatsApp para renovar.

2. Siempre debe mostrarse el mensaje de vigencia, aunque falten muchos dÃ­as.

### ğŸ§ª Fragmento PHP sugerido para `dashboard.php` (usuario restaurante):

```php
// ConfiguraciÃ³n de fecha de expiraciÃ³n
$fecha_licencia = '01-10-2025'; // Formato dd-mm-yyyy
$fecha_obj = DateTime::createFromFormat('d-m-Y', $fecha_licencia);
$hoy = new DateTime();
$dias_restantes = $fecha_obj->diff($hoy)->format('%r%a');

echo "<div style='background: #e7f3fe; border-left: 4px solid #2196F3; padding: 10px; margin-bottom: 15px; font-size: 14px;'>
    ğŸ“… Su licencia es por <strong>" . ($dias_restantes >= 0 ? $dias_restantes : 0) . " dÃ­as</strong> y expirarÃ¡ el <strong>{$fecha_licencia}</strong>.
</div>";

if ($dias_restantes <= 30 && $dias_restantes >= 0) {
    echo "<div style='background: #fff3cd; border: 1px solid #ffeeba; padding: 10px; margin-bottom: 15px; font-weight: bold;'>
        âš ï¸ Su licencia vencerÃ¡ en <strong>$dias_restantes dÃ­as</strong>. 
        Por favor <a href='https://wa.me/+56XXXXXXXXX' target='_blank'>comunÃ­quese con soporte</a> para renovarla.
    </div>";
}
```

Este control permite mantener el sistema completamente libre para el usuario, pero con visibilidad de su vigencia, reforzando el vÃ­nculo con el soporte tÃ©cnico y la renovaciÃ³n comercial.


############################################
## ğŸ“˜ README INTEGRADO (DOCUMENTACIÃ“N FINAL)
############################################


# ğŸ“– ELMENU - Sistema de MenÃº Digital para Restaurantes

Bienvenido a **ELMENU**, una aplicaciÃ³n web que permite crear menÃºs digitales para restaurantes de forma fÃ¡cil, visual y segura.

> âš ï¸ Importante: Este sistema **NO estÃ¡ diseÃ±ado solo para un restaurante**.  
> Se puede replicar para cualquier cantidad de restaurantes, cada uno con su propia carpeta y base de datos.  
> Los datos de â€œDon Gussoâ€ son solo un ejemplo.

---

## ğŸ§  Â¿QuÃ© es ELMENU?

ELMENU es una aplicaciÃ³n sencilla (no usa frameworks) para crear menÃºs online.  
Cada restaurante tiene su propia carpeta dentro del sitio web y puede administrar su menÃº sin afectar a los demÃ¡s.

---

## ğŸ§© Estructura de carpetas

El sitio web `https://elmenu.rest/` tendrÃ¡ una estructura como esta:

```
elmenu.rest/
â”œâ”€â”€ restaurante1/
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ login.php
â”‚   â”œâ”€â”€ dashboard.php
â”‚   â”œâ”€â”€ restaurante1.db
â”‚   â”œâ”€â”€ config.php
â”‚   â””â”€â”€ ...
â”œâ”€â”€ restaurante2/
â”œâ”€â”€ restaurante3/
```

Cada carpeta contiene:
- Archivos PHP para mostrar y administrar el menÃº
- Una base de datos SQLite propia
- Archivos de estilo y scripts

---

## ğŸ›  Â¿CÃ³mo se instala un nuevo restaurante?

### Paso 1: Copia una carpeta base
Duplica la carpeta de ejemplo (como `don_gusso/`) y renÃ³mbrala con el nombre del nuevo restaurante (por ejemplo, `pizzeria_roma/`).

### Paso 2: Cambia el nombre de la base de datos
Renombra el archivo `.db` para que tenga el mismo nombre del restaurante (ej: `pizzeria_roma.db`).

### Paso 3: Edita el archivo `config.php`
Abre `config.php` y cambia:
```php
$db_file = "pizzeria_roma.db";
```

### Paso 4: Â¡Listo!
Ya puedes visitar `https://elmenu.rest/pizzeria_roma/` y ver el menÃº del nuevo restaurante.

---

## ğŸ” Â¿QuiÃ©n puede editar quÃ©?

- **Administrador:** Puede agregar categorÃ­as, platos, cambiar paleta de colores, ver errores, y mÃ¡s.
- **Usuario restaurante:** Puede editar la informaciÃ³n bÃ¡sica del restaurante, logo, redes sociales, y platos existentes.  
  âŒ No puede crear nuevas categorÃ­as.

---

## ğŸ¨ PersonalizaciÃ³n visual

Cada restaurante puede elegir entre **17 paletas de colores** como:
- Italiana
- Chilena
- Mexicana
- Vegetariana
- CafÃ© & PastelerÃ­a
- y mÃ¡s...

Estas paletas cambian los colores del menÃº con solo un clic. Â¡No hay que saber programar!

---

## ğŸ¤– Para Codex, Copilot o desarrolladores

Esta aplicaciÃ³n:
- No usa frameworks
- Usa solo PHP + SQLite + HTML + CSS + JS
- Usa variables CSS para cambiar estilos
- Tiene archivos mÃ­nimos por restaurante
- EstÃ¡ optimizada para cPanel y servidores compartidos

Puedes generar cÃ³digo o modificar componentes editando:
- `dashboard.php`: para la administraciÃ³n
- `index.php`: para mostrar el menÃº pÃºblico
- `config.php`: para configurar la conexiÃ³n
- `scripts.js`: para acciones dinÃ¡micas
- `style-dashboard.css` y `style-restaurants.css`: para cambiar estilos

---

## ğŸ§ª Datos de ejemplo

La carpeta `don_gusso/` contiene un restaurante precargado con:
- 6 categorÃ­as (Entradas, Platos, Postres, etc.)
- 2 platos por categorÃ­a
- InformaciÃ³n ficticia: direcciÃ³n, telÃ©fono, etc.
- ImÃ¡genes de ejemplo

Puedes usarlo como plantilla para crear tus propios restaurantes.

---

## ğŸ¤“ Requisitos

- Servidor con PHP 7.4 o superior
- cPanel compatible
- SQLite habilitado
- Navegador moderno (Chrome, Firefox, Safari)

---

## âœ¨ CrÃ©ditos

Desarrollado por **Andesbytes.cl**  
Este sistema es autoadministrable y pensado para emprendedores gastronÃ³micos que necesitan una soluciÃ³n digital rÃ¡pida y sin costos mensuales.

---



############################################
## ğŸ¨ PERSONALIZACIÃ“N VISUAL - PALETAS CSS
############################################

Cada restaurante puede elegir entre 22 estilos visuales distintos, aplicados a travÃ©s del atributo:
<body data-theme="nombre-del-tema">

El archivo de estilos debe incluir una estructura como esta:

:root[data-theme="chilena"] {
  --color1: #002f6c;  /* Azul Marino */
  --color2: #e8dcc2;  /* Beige Tierra */
  --color3: #d52b1e;  /* Rojo Chileno */
}

### Paletas disponibles (colores de ejemplo para referencia visual):

- Italiana: Rojo Italiano, Crema Toscana, Verde Oliva
- AsiÃ¡tica: Rojo Imperial, Negro, Dorado
- Chilena: Azul Marino, Beige Tierra, Rojo Chileno
- Peruana: Rojo Andino, Amarillo/Naranja, Verde Esmeralda
- Gourmet: Negro, Blanco, Dorado o Cobre sutil
- Pub & Bar: Negro, Gris CarbÃ³n, Naranja Quemado
- Comida RÃ¡pida: Amarillo Brillante, Blanco, Azul o Verde
- Pollos: Naranja, Crema, MarrÃ³n o Verde Oliva
- Mexicana: Rojo Intenso, Verde Vibrante, Amarillo Brillante
- Mariscos: Azul Cielo, Blanco, Verde Menta o Coral
- Vegetariana: Verde Hoja, MarrÃ³n Tierra, Amarillo Mostaza
- Parrillada & Steakhouse: Rojo Vino, MarrÃ³n Caoba, Negro CarbÃ³n
- CafÃ© & PanaderÃ­a: CafÃ© Mocca, Crema Latte, MarrÃ³n Avellana
- HeladerÃ­a & Postres: Rosa Pastel, Azul Celeste, Amarillo Vainilla
- Comida Ãrabe & MediterrÃ¡nea: Azul Turquesa, Beige Arena, MarrÃ³n DÃ¡til
- Comida India: Naranja AzafrÃ¡n, Amarillo Curry, Rojo Especias
- FusiÃ³n & Moderno: Gris MetÃ¡lico, Azul NeÃ³n, PÃºrpura Oscuro
- BritÃ¡nico: Azul Real, Crema Suave, Rojo Bandera
- AlemÃ¡n: Negro CarbÃ³n, Rojo Fuego, Amarillo Mostaza
- AsiÃ¡tico General: Verde Bambu, Marfil, Rojo Sakura
- HindÃº: Naranja Fuego, PÃºrpura Azulado, Amarillo CÃºrcuma
- Sushi: Blanco Arroz, Negro Alga, Rojo SalmÃ³n

Todas las combinaciones estÃ¡n definidas por variables CSS centralizadas.


############################################
## ğŸ“± CATEGORÃAS EN MÃ“VIL - SCROLL HORIZONTAL
############################################

En dispositivos mÃ³viles, la barra de categorÃ­as debe visualizarse como una lista deslizante horizontal con estilo sticky.

### Requisitos:
- Debe permitir desplazamiento lateral (horizontal scroll)
- Debe ser sticky en la parte superior o justo debajo del header
- Compatible con pantallas desde 320px

### CSS sugerido:

.categorias-scroll {
  display: flex;
  overflow-x: auto;
  gap: 8px;
  padding: 10px;
  white-space: nowrap;
  scrollbar-width: none; /* Firefox */
}
.categorias-scroll::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}
.categoria {
  flex: 0 0 auto;
  padding: 8px 16px;
  background-color: var(--color2);
  border-radius: 20px;
  font-weight: bold;
  cursor: pointer;
}
